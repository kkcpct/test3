<!DOCTYPE html>
<html>
<!-- http://www.kangting.tw/2012/09/html5-filereader.html -->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<!-- <link rel="stylesheet" href=""> -->
	<script type="text/javascript" src="https://cdn.rawgit.com/showdownjs/showdown/1.6.1/dist/showdown.min.js"></script>
	<script type="text/javascript">
		window.onload = function () {
		    document.getElementById('myfile').onchange = readFile;
		};
		function readFile() {
		    file = this.files[0];
		    console.log(this.files[0]);
		    var fReader = new FileReader();           
		    fReader.onload = function (event) {
		        document.getElementById('fileContent').value = event.target.result;
		    };
		    fReader.readAsText(file);
		}

		function get_file_in_text(filepath){
			//http://blog.xuite.net/xiaolian/blog/58941542-%E3%80%90AJAX%E3%80%91%E8%AE%80%E5%8F%96%E6%96%87%E5%AD%97%E6%AA%94
			var xmlhttp;
			if (window.XMLHttpRequest)
			  {// code for IE7+, Firefox, Chrome, Opera, Safari
			  xmlhttp=new XMLHttpRequest();
			  }
			else
			  {// code for IE6, IE5
			  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
			  }
			xmlhttp.onreadystatechange=function()
			  {
			  if (xmlhttp.readyState==4 && xmlhttp.status==200)
			    {
			    	console.log(xmlhttp.responseText);
			    	document.getElementById('fileContent').value = markdown_to_html(xmlhttp.responseText);
			    	return xmlhttp.responseText;
			    }
			  }
			xmlhttp.open("GET",filepath,true);
			xmlhttp.send();
		}

		function markdown_to_html(text){
			var converter = new showdown.Converter();
			return converter.makeHtml(text);
		}

		//document.getElementById('fileContent').value = markdown_to_html(get_file_in_text("README.md"));//get_file_in_text("README.md");
		console.log(get_file_in_text("README.md"));
		console.log(markdown_to_html(get_file_in_text("README.md")));
	</script>
</head>
<body>
    <p> <input id="myfile"  type="file"   value="README.md"  /></p>
    <textarea  id="fileContent" cols="68" rows="10"  ></textarea>
</body>
</html>